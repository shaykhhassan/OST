#!/bin/bash

# Check correct usage
if [ "$#" -ne 2 ]; then
    echo "Usage: $0 <input_file> <separator>" >&2
    exit 1
fi

file="$1"
sep="$2"

awk -v sep="$sep" '
BEGIN {
    FS = sep
}
NR == 1 {
    for (i = 1; i <= NF; i++) {
        gsub(/\r/, "", $i)
        header[i] = $i
        empty[i] = 0
    }
    max_fields = NF
    next
}
{
    gsub(/\r/, "")
    for (i = 1; i <= max_fields; i++) {
        if (i > NF || $i == "") {
            empty[i]++
        }
    }
}
END {
    for (i = 1; i <= max_fields; i++) {
        print header[i] ": " empty[i]
    }
}
' "$file"

